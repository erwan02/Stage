<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Envoi de la newsletter</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
    <link rel="stylesheet" href="styleNewLetterDeroulant.css">
</head>
<body>
    <div class="live-region" aria-live="polite" aria-atomic="true" id="announcements"></div>
   
    <header>
        <div class="header-container">
            <div class="header-title">
                <h1>Envoi de la newsletter</h1>
            </div>
            <div class="header-buttons" role="group" aria-label="Actions principales">
                <button type="button" aria-label="Ouvrir la page de contact">Contact</button>
                <button type="button" aria-label="Voir le profil utilisateur">Profil</button>
                <button type="button" aria-label="Se d√©connecter de l'application">D√©connexion</button>
                <button type="button" class="accessibility-toggle" aria-label="Activer/d√©sactiver le mode accessibilit√©" aria-pressed="false" id="accessibilityToggle">
                    üëÅÔ∏è
                </button>
            </div>
        </div>
    </header>
   
    <nav aria-label="Menu principal">
        <a href="#" aria-label="Accueil">Accueil</a>
        <a href="#" aria-label="Actualit√©s et blog">Actualit√©s/Blog</a>
        <a href="#" aria-label="Voir les ateliers disponibles">Ateliers</a>
        <a href="#" aria-label="Consulter l'historique">Historique</a>
        <a href="#" aria-label="G√©rer les utilisateurs">Gestion utilisateurs</a>
        <a href="#" aria-label="Cr√©er un nouvel atelier">Cr√©ation d'atelier</a>
        <a href="#" aria-label="Publication d'article">Publication d'article</a>
        <a href="#" class="active" aria-current="page" aria-label="Envoyer newsletter (page actuelle)">Envoyer newsletter</a>
        <a href="#" aria-label="Voir le tableau de bord">Tableau de bord</a>
        <a href="#" aria-label="√Ä propos">√Ä propos</a>
    </nav>
   
    <main>
        <form aria-labelledby="form-title" novalidate>
            <h2 id="form-title">Formulaire d'envoi de newsletter</h2>
           
            <label for="objet">Objet <span aria-label="obligatoire">*</span>:</label>
            <input type="text" id="objet" name="objet" aria-required="true" aria-describedby="objet-error" />
            <div id="objet-error" role="alert" aria-live="polite" style="color: #c00; display: none;"></div>
           
            <label for="modele">Mod√®le :</label>
            <select id="modele" name="modele" aria-describedby="modele-help">
                <option value="">-- Aucun --</option>
                <option value="modele1">Mod√®le 1 - Annonce d'√©v√®nement</option>
                <option value="modele2">Mod√®le 2 - R√©sum√© d'article</option>
            </select>
            <div id="modele-help" style="font-size: 0.9em; color: #666; margin-top: 0.25em;">
                S√©lectionnez un mod√®le pr√©d√©fini ou laissez vide pour cr√©er un contenu personnalis√©
            </div>
           
            <label for="contenu">Contenu <span aria-label="obligatoire">*</span>:</label>
            <textarea id="contenu" name="contenu" aria-required="true" aria-describedby="contenu-error contenu-help" placeholder="Saisissez le contenu de votre newsletter..."></textarea>
            <div id="contenu-help" style="font-size: 0.9em; color: #666; margin-top: 0.25em;">
                R√©digez le contenu de votre newsletter ici
            </div>
            <div id="contenu-error" role="alert" aria-live="polite" style="color: #c00; display: none;"></div>
           
            <div class="buttons">
                <button type="submit" class="submit-btn" aria-describedby="submit-help">
                    Envoy√© aux abonn√©s
                </button>
                <button type="reset" class="cancel-btn" aria-describedby="cancel-help">
                    Annuler
                </button>
            </div>
            <div id="submit-help" class="sr-only">Envoyer la newsletter √† tous les abonn√©s</div>
            <div id="cancel-help" class="sr-only">Annuler toutes les modifications</div>
        </form>
    </main>
    
    <script>
        // Gestion du mode accessibilit√©
        const accessibilityToggle = document.getElementById('accessibilityToggle');
        const body = document.body;
        const announcements = document.getElementById('announcements');
       
        // Charger les pr√©f√©rences sauvegard√©es
        const isAccessibilityMode = JSON.parse(localStorage.getItem('accessibilityMode') || 'false');
        if (isAccessibilityMode) {
            enableAccessibilityMode();
        }
       
        accessibilityToggle.addEventListener('click', function() {
            const isActive = body.classList.contains('accessibility-mode');
           
            if (isActive) {
                disableAccessibilityMode();
            } else {
                enableAccessibilityMode();
            }
        });
       
        function enableAccessibilityMode() {
            body.classList.add('accessibility-mode');
            accessibilityToggle.classList.add('active');
            accessibilityToggle.setAttribute('aria-pressed', 'true');
            announcements.textContent = 'Mode accessibilit√© activ√©. Taille du texte augment√©e, contrastes renforc√©s.';
            localStorage.setItem('accessibilityMode', 'true');
        }
       
        function disableAccessibilityMode() {
            body.classList.remove('accessibility-mode');
            accessibilityToggle.classList.remove('active');
            accessibilityToggle.setAttribute('aria-pressed', 'false');
            announcements.textContent = 'Mode accessibilit√© d√©sactiv√©. Retour √† l\'affichage normal.';
            localStorage.setItem('accessibilityMode', 'false');
        }
       
        // Gestion des mod√®les
        const modeleSelect = document.getElementById('modele');
        const contenuTextarea = document.getElementById('contenu');
       
        modeleSelect.addEventListener('change', function() {
            switch(this.value) {
                case 'modele1':
                    contenuTextarea.value = 'Cher(e) abonn√©(e),\n\nNous avons le plaisir de vous annoncer un √©v√®nement exceptionnel qui se d√©roulera prochainement.\n\nDate : \nLieu : \nHeure : \n\nN\'h√©sitez pas √† vous inscrire d√®s maintenant.\n\nCordialement,\nL\'√©quipe';
                    announcements.textContent = 'Mod√®le "Annonce d\'√©v√®nement" appliqu√©';
                    break;
                case 'modele2':
                    contenuTextarea.value = 'Bonjour,\n\nD√©couvrez notre dernier article qui traite d\'un sujet passionnant.\n\nTitre de l\'article : \n\nR√©sum√© : \n\nLisez l\'article complet sur notre site web.\n\nBonne lecture !\nL\'√©quipe';
                    announcements.textContent = 'Mod√®le "R√©sum√© d\'article" appliqu√©';
                    break;
                default:
                    if (contenuTextarea.value.includes('Cher(e) abonn√©(e)') || contenuTextarea.value.includes('Bonjour,')) {
                        contenuTextarea.value = '';
                        announcements.textContent = 'Mod√®le supprim√©, contenu effac√©';
                    }
            }
        });
       
        // Validation du formulaire
        const form = document.querySelector('form');
        const objetInput = document.getElementById('objet');
       
        form.addEventListener('submit', function(e) {
            e.preventDefault();
           
            let isValid = true;
           
            // Validation de l'objet
            if (!objetInput.value.trim()) {
                showError('objet-error', 'L\'objet est obligatoire');
                isValid = false;
            } else {
                hideError('objet-error');
            }
           
            // Validation du contenu
            if (!contenuTextarea.value.trim()) {
                showError('contenu-error', 'Le contenu est obligatoire');
                isValid = false;
            } else {
                hideError('contenu-error');
            }
           
            if (isValid) {
                if (confirm('√ätes-vous s√ªr de vouloir envoyer cette newsletter √† tous les abonn√©s ?')) {
                    announcements.textContent = 'Newsletter envoy√©e avec succ√®s √† tous les abonn√©s !';
                    alert('Newsletter envoy√©e avec succ√®s !');
                    form.reset();
                    hideError('objet-error');
                    hideError('contenu-error');
                }
            } else {
                announcements.textContent = 'Veuillez corriger les erreurs dans le formulaire.';
            }
        });
       
        function showError(errorId, message) {
            const errorElement = document.getElementById(errorId);
            errorElement.textContent = message;
            errorElement.style.display = 'block';
        }
       
        function hideError(errorId) {
            const errorElement = document.getElementById(errorId);
            errorElement.style.display = 'none';
        }
       
        // Gestion du bouton reset
        form.addEventListener('reset', function() {
            hideError('objet-error');
            hideError('contenu-error');
            announcements.textContent = 'Formulaire r√©initialis√©.';
        });
       
        // Navigation au clavier am√©lior√©e
        document.addEventListener('keydown', function(e) {
            // Raccourci clavier pour activer/d√©sactiver le mode accessibilit√© (Alt + A)
            if (e.altKey && e.key === 'a') {
                e.preventDefault();
                accessibilityToggle.click();
            }
        });
    </script>
</body>
</html>